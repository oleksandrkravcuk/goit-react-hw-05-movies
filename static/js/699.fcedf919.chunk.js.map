{"version":3,"file":"static/js/699.fcedf919.chunk.js","mappings":"0NACA,EAA4B,0BAA5B,EAAkE,0BAAlE,EAA4G,8BAA5G,EAAuL,qBAAvL,EAAoN,sBAApN,EAAyP,6B,SC0FzP,EArFe,WACb,IAAAA,GAAwCC,EAAAA,EAAAA,MAAiBC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAlDI,EAAYF,EAAA,GAAEG,EAAeH,EAAA,GACpCI,GAA0BC,EAAAA,EAAAA,UAASH,EAAaI,IAAI,UAAY,IAAGC,GAAAN,EAAAA,EAAAA,GAAAG,EAAA,GAA5DI,EAAKD,EAAA,GAAEE,EAAQF,EAAA,GACtBG,GAA0BL,EAAAA,EAAAA,UAAS,IAAGM,GAAAV,EAAAA,EAAAA,GAAAS,EAAA,GAA/BE,EAAKD,EAAA,GAAEE,EAAQF,EAAA,GACtBG,GAA0CT,EAAAA,EAAAA,WAAS,GAAMU,GAAAd,EAAAA,EAAAA,GAAAa,EAAA,GAAlDE,EAAaD,EAAA,GAAEE,EAAgBF,EAAA,GAChCG,GAAWC,EAAAA,EAAAA,MACXC,EAAQlB,EAAaI,IAAI,UAAY,IAyB3Ce,EAAAA,EAAAA,YAAU,WACHD,GAAUJ,GAIfM,EAAiBF,GACdG,MAAK,SAAAC,GACJ,GAA2B,IAAvBA,EAAKC,cACP,OAAOC,MAAM,yCAADC,OAA0CP,EAAK,MAG7DP,EAASW,EAAKI,QAChB,IACCC,OAAM,SAAAC,GAAK,OAAIC,QAAQD,MAAM,yBAA0BA,EAAM,GAClE,GAAG,CAACV,EAAOJ,IAEX,IAAMM,EAAmB,SAACF,GACxB,OAAOY,MAAM,qDAADL,OAlDD,mCAkD6D,WAAAA,OAAUP,IAC/EG,MAAK,SAAAU,GAAQ,OAAIA,EAASC,MAAM,GACrC,EAMA,OACEC,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,EAAiBC,SAAA,EAC/BH,EAAAA,EAAAA,MAAA,QAAMC,UAAWC,EAAaE,SAAU,SAACC,GAAQA,EAAEC,iBAjDrDtC,EAAgB,CAAEiB,MAAOZ,IACzBS,GAAiB,GAEZT,EAKLc,EAAiBd,GACde,MAAK,SAAAC,GACJ,GAA2B,IAAvBA,EAAKC,cACP,OAAOC,MAAM,yCAADC,OAA0CnB,EAAK,MAG7DK,EAASW,EAAKI,QAChB,IACCC,OAAM,SAAAC,GACLC,QAAQD,MAAM,yBAA0BA,GACxCjB,EAAS,GACX,IAfAA,EAAS,GA6C4E,EAAEyB,SAAA,EACrFI,EAAAA,EAAAA,KAAA,SACEN,UAAWC,EACXM,KAAK,OACLnC,MAAOA,EACPoC,SAXkB,SAACJ,GACzB/B,EAAS+B,EAAEK,OAAOrC,MACpB,KAWMkC,EAAAA,EAAAA,KAAA,UAAQC,KAAK,SAASP,UAAWC,EAAoBC,SAAC,cAIvDtB,IACC0B,EAAAA,EAAAA,KAAA,MAAIN,UAAWC,EAAiBC,SAC7B1B,EAAMkC,KAAI,SAAAC,GAAA,IAAGC,EAAKD,EAALC,MAAOC,EAAEF,EAAFE,GAAE,OACvBP,EAAAA,EAAAA,KAAA,MAAaN,UAAWC,EAAqBC,UAC3CI,EAAAA,EAAAA,KAACQ,EAAAA,GAAI,CAACC,GAAE,WAAAxB,OAAasB,GAAMG,MAAO,CAAEC,KAAMnC,GAAWoB,SAClDU,KAFIC,EAIJ,QAOf,C","sources":["webpack://goit-react-hw-05-movies/./src/components/Search/Search.module.css?06df","components/Search/Search.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Search_container__JDaLY\",\"movieList\":\"Search_movieList__Rr3Hv\",\"movieListItem\":\"Search_movieListItem__j6mDz\",\"movieLink\":\"Search_movieLink__p9aGv\",\"form\":\"Search_form__KGT+E\",\"input\":\"Search_input__PXR0c\",\"searchButton\":\"Search_searchButton__8Jp1t\"};","import React, { useState, useEffect } from 'react';\nimport { Link, useSearchParams, useLocation } from 'react-router-dom';\nimport styles from './Search.module.css';\n\nconst apiKey = 'eed14fd55202ee0e89c15a259f6aa876';\n\nconst Movies = () => {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const [value, setValue] = useState(searchParams.get('query') || '');\n  const [files, setFiles] = useState([]);\n  const [searchClicked, setSearchClicked] = useState(false);\n  const location = useLocation();\n  const query = searchParams.get('query') || '';\n\n  const handleSearch = () => {\n    setSearchParams({ query: value });\n    setSearchClicked(true);\n\n    if (!value) {\n      setFiles([]); \n      return;\n    }\n\n    fetchSearchMovie(value)\n      .then(info => {\n        if (info.total_results === 0) {\n          return alert(`Sorry, we didn't find any results for ${value}.`);\n        }\n\n        setFiles(info.results);\n      })\n      .catch(error => {\n        console.error('Error fetching movies:', error);\n        setFiles([]); \n      });\n  };\n\n  useEffect(() => {\n    if (!query || !searchClicked) {\n      return;\n    }\n\n    fetchSearchMovie(query)\n      .then(info => {\n        if (info.total_results === 0) {\n          return alert(`Sorry, we didn't find any results for ${query}.`);\n        }\n\n        setFiles(info.results);\n      })\n      .catch(error => console.error('Error fetching movies:', error));\n  }, [query, searchClicked]);\n\n  const fetchSearchMovie = (query) => {\n    return fetch(`https://api.themoviedb.org/3/search/movie?api_key=${apiKey}&query=${query}`)\n      .then(response => response.json());\n  };\n\n  const handleInputChange = (e) => {\n    setValue(e.target.value);\n  };\n\n  return (\n    <div className={styles.container}>\n      <form className={styles.form} onSubmit={(e) => { e.preventDefault(); handleSearch(); }}>\n        <input\n          className={styles.input}\n          type=\"text\"\n          value={value}\n          onChange={handleInputChange}\n        />\n        <button type=\"submit\" className={styles.searchButton}>\n          Search\n        </button>\n      </form>\n      {searchClicked && (\n        <ul className={styles.movieList}>\n          {files.map(({ title, id }) => (\n          <li key={id} className={styles.movieListItem}>\n            <Link to={`/movies/${id}`} state={{ from: location }}>\n              {title}\n            </Link>\n          </li>\n        ))}\n\n        </ul>\n      )}\n    </div>\n  );\n};\n\nexport default Movies;"],"names":["_useSearchParams","useSearchParams","_useSearchParams2","_slicedToArray","searchParams","setSearchParams","_useState","useState","get","_useState2","value","setValue","_useState3","_useState4","files","setFiles","_useState5","_useState6","searchClicked","setSearchClicked","location","useLocation","query","useEffect","fetchSearchMovie","then","info","total_results","alert","concat","results","catch","error","console","fetch","response","json","_jsxs","className","styles","children","onSubmit","e","preventDefault","_jsx","type","onChange","target","map","_ref","title","id","Link","to","state","from"],"sourceRoot":""}